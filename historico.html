<!DOCTYPE html>
<html lang = "pt">
<head>
    <meta charset="UTF-8"/>
    <title>Histórico</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <!-- fonte usada em algumas partes do site-->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Odibee+Sans&display=swap');
    </style>
</head>

<body>
	<section id="tela">

        <section class="cabecalho">
                <h1 class="titulo">Histórico</h1>
        </section>            
        
        <table class="historico" id="minhaTabela">
            <tr>
                <th>Nome</th>
                <th>Dimensões</th>
                <th>Bombas</th>
                <th>Modalidade</th>
                <th>Tempo</th>
                <th>Resultado</th>
                <th>Data/Hora</th>
            </tr>
            
        </table>
    
        <br>
        <button class="normal" id="voltar" type="button" onclick="window.location.href='configs.html'">JOGAR</button>
        <button class="normal" id="voltar" type="button" onclick="window.location.href='ranking.html'">RANKING</button>
    </section>

    
    <script>
        function historico() {
            n = sessionStorage.getItem("nome");
            d = sessionStorage.getItem("dimensao");
            b = sessionStorage.getItem("bombas");
            m = sessionStorage.getItem("modalidade"); 
            t = sessionStorage.getItem("tempo");
            r = sessionStorage.getItem("resultado"); 
            dh = sessionStorage.getItem("dateTime");

            resgistro = {
                nome: n,
                dimensao: d,
                bombas: b,
                modalidade: m,
                tempo: t,
                resultado: r,
                datahora: dh
            } 

            registers = sessionStorage.getItem("registros")
            if (registers) {
                registers = JSON.parse(registers);
                registers.push(resgistro);
                sessionStorage.setItem("registros",JSON.stringify(registers));
            } else {
                const registerList = [];
                registerList.push(resgistro);
                sessionStorage.setItem("registros",JSON.stringify(registerList));
                registers = registerList;
            }
        }


        function myCreateFunction(registers) {
            var table = document.getElementById("minhaTabela");
            
            registers.forEach(function(registro){
                var row = table.insertRow(-1);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                var cell5 = row.insertCell(4);
                var cell6 = row.insertCell(5);
                var cell7 = row.insertCell(6);

                cell1.innerHTML = registro.nome;
                cell2.innerHTML = registro.dimensao;
                cell3.innerHTML = registro.bombas;
                cell4.innerHTML = registro.modalidade;
                cell5.innerHTML = registro.tempo;
                cell6.innerHTML = registro.resultado;
                cell7.innerHTML = registro.datahora;
            })
        }
        historico();    
        myCreateFunction(registers);
    </script>

</body>		
</html>